define(["jquery"],function(a){return{stitles:[],init:function(a){this.stitles=a},fetchSubtitleData:function(){return this.stitles},fetchCount:function(){return this.stitles.length},addItem:function(a,b,c,d){var e=this.makeItem(b,c,d);this.stitles.push(e)},insertItem:function(a,b,c,d){var e=this.makeItem(b,c,d);this.stitles.splice(a,0,e)},removeItem:function(a){this.stitles.splice(a,1)},fetchItem:function(a){return this.stitles[a]},fetchItemByTime:function(a){for(var b=this.fetchCount(),c=b-1;c>-1;c--){var d=this.fetchItem(c);if(a>=d.start&&a<=d.end)return c}return!1},updateItem:function(a,b,c,d){this.stitles[a].start=b,this.stitles[a].end=c,this.stitles[a].part=d},split:function(a){var b=this.fetchItem(a),c=b.end-b.start;if(c<300)return!1;var d=b.start,e=b.start+c/2-100,f=e+200,g=b.end;return this.insertItem(a,d,e,b.part),this.updateItem(a+1,f,g,b.part),!0},mergeUp:function(a){if(!this.canMergeUp(a))return!1;var b=this.fetchItem(a),c=this.fetchItem(a-1);return this.updateItem(a-1,c.start,b.end,c.part+" "+b.part),this.removeItem(a),!0},canMergeUp:function(a){return!(0==a||this.fetchCount()<2)},makeItem:function(a,b,c){return{start:a,end:b,part:c}}}});